<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Signin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
        
</head>

<body>
    <div class="container-fluid d-flex justify-content-center align-items-center  vh-100" style="background-color:#ffffff ;">
    <div class="container border border border-dark rounded" style="width: 40%; background-color:#d9dbbc;" >
        <div class="d-flex justify-content-center align-items-center mt-3">
        <img src="finallogo.png" class="img-thumbnail " style="width: 180px;" alt="..."> </div>
       <h3></h3>
       <div class="mb-3">
        <label for="exampleFormControlInput1" class="form-label">Name</label>
        <input type="name" class="form-control" id="name" >
        <p id="namevalidation"></p>
    </div>
        <div class="mb-3">
            <label for="exampleFormControlInput2" class="form-label">Email address</label>
            <input type="email" class="form-control" id="email" >
            <p id="emailvalidation"></p>
        </div>
        <div class="mb-3">
            <label for="inputPassword5" class="form-label">Password</label>
            <input type="password" id="password" class="form-control" aria-describedby="passwordHelpBlock">
            <p id="passwordvalidation"></p>
            <div id="passwordHelpBlock" class="form-text">
                Your password must be 8-20 characters long, contain letters and numbers.
            </div>
        </div>
        <div class="d-flex flex-column justify-content-center align-items-center mb-3" >
       <button type="button" onclick="saveData()" class="btn btn-primary" style="width: 200px; background-color:#33658a ;">Sign in</button> </div>
    </div>
</div>
<div class="toast align-items-center position-fixed top-0 end-0 mt-3" role="alert" aria-live="assertive"
    aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body">
        Registration Failed
      </div>
      <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
<script>
function saveData(){
    let name = document.getElementById("name").value;
    let email = document.getElementById("email").value;
    let password = document.getElementById("password").value;
    let nameReg = /^[a-zA-Z]{5,20}$/;
    let emailReg =/^[a-zA-Z0-9._]{3,}@[a-zA-Z]{5,}[.]{1}[a-zA-Z]{3}/;
    let passwordReg = /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&-+=()]).{5,20}$/;
    if(!nameReg.test(name))
    {
    document.getElementById("namevalidation").innerHTML="Invalid user name";
    return false;
    }
    else{
        document.getElementById("namevalidation").innerHTML=" ";
    }
    if(!emailReg.test(email))
    {
        
        document.getElementById("emailvalidation").innerHTML="Invalid email name";
        return false;
    }
    else{
        document.getElementById("emailvalidation").innerHTML=" ";
    }
    if(!passwordReg.test(password))
    { 
        document.getElementById("passwordvalidation").innerHTML="Invalid password name";
        return false;
    }
    else{
        document.getElementById("passwordvalidation").innerHTML=" ";
    }
    let arr = new Array();
      arr = JSON.parse(localStorage.getItem("user")) ? JSON.parse(localStorage.getItem("user")) : [];
      if (arr.some((v) => {
        return v.email == email
      })) {
        const myToast = new bootstrap.Toast('.toast');
        setTimeout(() => {
          myToast.show();
        })
      }
      else {
        arr.push({ "name": name, "email": email, "password": password });
        localStorage.setItem("user", JSON.stringify(arr));
        window.location.href = "login.html";
      }
            
 }
</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>
</body>

</html>